<div class="bg-[#181c23] border border-white/10 rounded-b-lg p-6">
  <label class="block text-sm font-medium text-white mb-4">Videos de YouTube</label>

  @if (loading) {
    <div class="flex justify-center items-center py-8">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
  } @else {
    <div class="space-y-4 mb-6">
      @for (video of videos; track video.id) {
        <mat-card class="bg-black/40">
          <mat-card-content class="flex items-center gap-4 p-3">
            <div class="flex-1 overflow-hidden">
              <p class="text-white truncate" title="{{ video.url }}">{{ video.url }}</p>
            </div>
            <button mat-icon-button color="warn" (click)="handleRemoveVideo(video.id)">
              <i-lucide name="x" class="w-5 h-5"></i-lucide>
            </button>
          </mat-card-content>
        </mat-card>
      } @empty {
        <div class="text-center py-8 border-2 border-dashed border-white/10 rounded-lg">
          <p class="text-gray-400">Aún no se han agregado videos.</p>
        </div>
      }
    </div>
  }

  <form [formGroup]="videoForm" (ngSubmit)="handleAddVideo()" class="flex gap-2 items-start">
    <mat-form-field appearance="outline" class="w-full flex-1">
      <mat-label>URL de YouTube</mat-label>
      <input matInput formControlName="newVideo" placeholder="https://www.youtube.com/watch?v=...">
      @if (videoForm.get('newVideo')?.hasError('pattern')) {
        <mat-error>La URL no parece ser un video de YouTube válido.</mat-error>
      }
    </mat-form-field>
    <button mat-flat-button color="primary" type="submit" [disabled]="videoForm.invalid" class="h-[52px] !px-5">
      <div class="flex items-center gap-2">
        <i-lucide name="plus" class="w-5 h-5"></i-lucide>
        Agregar
      </div>
    </button>
  </form>
  <p class="text-xs text-gray-400 mt-2">Pega la URL completa del video de YouTube.</p>
</div>
